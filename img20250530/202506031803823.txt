[root@dmall-point-mall-web-gz01a-blue-77744c6dd9-xs9gz 10.56.212.245:8080]# cat paid_coupon.log | tail -n +25 | head -n 100
[ERROR] 2025-06-03 16:31:50.383 [DubboServerHandler-10.56.212.245:20880-thread-200] [com.dmall.pointmall.service.paidcoupon.impl.PaidCouponOrderSubmitServiceImpl#userPaidCouponOrderPersist@1459] [c2fc7414311715a5] - wareId: 14801, 生成订单记录异常, userPaidCouponOrder: {"creator":"orderSubmitAndOfc","errorMsg":"SUCCESS","ifGifting":false,"orderId":"20000335200252105","orderStatus":2,"orderWareId":"14801","outerOrderId":"107771548330240","packageCode":"QB202506031","packageId":38401,"platform":"kuaishou_groupon","price":1,"saleChannel":58,"sendStatus":1,"skuId":106768951,"storeId":172601,"userId":99083205,"vendorId":11971}, scene: 查询券包详情, param: 38401 
com.wm.nb.exception.AppException: Mybatis执行新增异常
        at com.dmall.marketing.dao.base.BaseDaoImpl.insert(BaseDaoImpl.java:90)
        at com.dmall.marketing.dao.base.BaseDaoImpl.insertEntry(BaseDaoImpl.java:36)
        at com.dmall.pointmall.service.paidcoupon.impl.PaidCouponOrderSubmitServiceImpl.userPaidCouponOrderPersist(PaidCouponOrderSubmitServiceImpl.java:1455)
        at com.dmall.pointmall.service.paidcoupon.impl.PaidCouponOrderSubmitServiceImpl.orderSubmitReturnCoupon(PaidCouponOrderSubmitServiceImpl.java:1363)
        at com.dmall.pointmall.service.paidcoupon.impl.PaidCouponOrderSubmitServiceImpl$$FastClassBySpringCGLIB$$72e90599.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
        at com.dmall.pointmall.service.paidcoupon.impl.PaidCouponOrderSubmitServiceImpl$$EnhancerBySpringCGLIB$$e89937ea.orderSubmitReturnCoupon(<generated>)
        at com.dmall.pointmall.service.paidcoupon.salechannel.impl.business.PaidCouponService4KuaiShouServiceImpl.orderSubmitReturnCoupon(PaidCouponService4KuaiShouServiceImpl.java:36)
        at com.dmall.pointmall.service.dubbo.impl.PaidCouponOrderServiceImpl.orderSubmitReturnCoupon(PaidCouponOrderServiceImpl.java:199)
        at com.dmall.pointmall.service.dubbo.impl.PaidCouponOrderServiceImpl$$FastClassBySpringCGLIB$$462ca8d1.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.dmall.marketing.aspect.LogEnhanceAspect.handleLogEnhance(LogEnhanceAspect.java:58)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
        at com.dmall.pointmall.service.dubbo.impl.PaidCouponOrderServiceImpl$$EnhancerBySpringCGLIB$$70c5a278.orderSubmitReturnCoupon(<generated>)
        at org.apache.dubbo.common.bytecode.Wrapper74.invokeMethod(Wrapper74.java)
        at org.apache.dubbo.rpc.proxy.javassist.JavassistProxyFactory$1.doInvoke(JavassistProxyFactory.java:47)
        at org.apache.dubbo.rpc.proxy.AbstractProxyInvoker.invoke(AbstractProxyInvoker.java:94)
        at org.apache.dubbo.config.invoker.DelegateProviderMetaDataInvoker.invoke(DelegateProviderMetaDataInvoker.java:56)
        at org.apache.dubbo.rpc.protocol.InvokerWrapper.invoke(InvokerWrapper.java:56)
        at org.apache.dubbo.rpc.filter.ExceptionFilter.invoke(ExceptionFilter.java:63)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.monitor.support.MonitorFilter.invoke$original$LwcEvpeg(MonitorFilter.java:91)
        at org.apache.dubbo.monitor.support.MonitorFilter.invoke$original$LwcEvpeg$accessor$MjpYSnqd(MonitorFilter.java)
        at org.apache.dubbo.monitor.support.MonitorFilter$auxiliary$vRRRbEmN.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:92)
        at org.apache.dubbo.monitor.support.MonitorFilter.invoke(MonitorFilter.java)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.TimeoutFilter.invoke(TimeoutFilter.java:54)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.protocol.dubbo.filter.TraceFilter.invoke(TraceFilter.java:81)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.GlobalParameterProviderFilter.invoke(GlobalParameterProviderFilter.java:31)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.ContextFilter.invoke(ContextFilter.java:87)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.GenericFilter.invoke(GenericFilter.java:191)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.ClassLoaderFilter.invoke(ClassLoaderFilter.java:38)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.filter.EchoFilter.invoke(EchoFilter.java:40)
        at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:74)
        at org.apache.dubbo.rpc.protocol.dubbo.DubboProtocol$1.reply(DubboProtocol.java:134)
        at org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeHandler.handleRequest(HeaderExchangeHandler.java:103)
        at org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeHandler.received(HeaderExchangeHandler.java:200)
        at org.apache.dubbo.remoting.transport.DecodeHandler.received(DecodeHandler.java:51)
        at org.apache.dubbo.remoting.transport.dispatcher.ChannelEventRunnable.run(ChannelEventRunnable.java:57)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:750)
Caused by: org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'first_buy' cannot be null
### The error may exist in sqlmap/UserPaidCouponOrder.xml
### The error may involve com.dmall.pointmall.dao.paidcoupon.UserPaidCouponOrderDao.insertEntry-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO `user_paid_coupon_order`             (             `sale_channel`,             `package_id`,             `order_id`,             `order_ware_id`,             `outer_order_id`,             `outer_ware_id`,             `order_origin`,             `business_id`,             `sku_id`,             `price`,             `vendor_id`,             `store_id`,             `user_id`,             `order_status`,             `platform`,             `package_code`,             `first_buy`,             `send_status`,             `error_msg`,             `creator`,             `created`,             `last_expire_time`,             `yn`,             `properties`,             `additional_value_details`,             `use_recover`,             `first_use_order_id`,             `need_reissue`,             `reissue_count`)             VALUES             (             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             ?,             now(),             ?,             1,             ?,             ?,             ?,             ?,             ?,             ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'first_buy' cannot be null
; Column 'first_buy' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'first_buy' cannot be null
        at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
        at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
        at com.sun.proxy.$Proxy78.insert(Unknown Source)
        at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
        at com.dmall.marketing.dao.base.BaseDaoImpl.insert(BaseDaoImpl.java:85)
        ... 71 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'first_buy' cannot be null
        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$M94MJEvI(ClientPreparedStatement.java:371)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$M94MJEvI$accessor$LIzdG4oi(ClientPreparedStatement.java)
        at com.mysql.cj.jdbc.ClientPreparedStatement$auxiliary$kZ9HVTQy.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:92)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java)